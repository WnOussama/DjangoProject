{% load ipost %}
{% load static %}

{% for notice in user.profile.notifications.all %}

{% if notice.category.name == 'friend_request' %}

<li>
  <div class="list-group-item list-group-item-action rounded {% if notice.seen %}{% else %}badge-unread{% endif %} d-flex border-0 mb-1 p-3">
    <div class="avatar text-center d-none d-sm-inline-block">
      <img class="avatar-img rounded" src="https://www.svgrepo.com/show/228141/add-user-add.svg" alt="">
    </div>
    <div class="ms-sm-3">
      <div class=" d-flex">
      <p class="small mb-2">{{notice.notification}}</p>
      <p class="small ms-3 text-nowrap">{{notice.created_at|comment_time_fixer}}</p>
    </div>
    <div class="d-flex">
      <button 
      class="btn btn-sm py-1 btn-primary me-2"
      onclick="window.location.href='{{notice.url}}';">Accept </button>
      <button class="btn btn-sm py-1 btn-danger-soft">Delete </button>
    </div>
  </div>
</div>
</li>

{% elif notice.category.name == 'message' or notice.category.name == 'other' %}

<li>
  <a href="#" class=" {% if notice.seen %}{% else %}badge-unread{% endif %} list-group-item list-group-item-action rounded d-flex border-0 p-3 mb-1">
    <div class="avatar text-center d-none d-sm-inline-block">
      <img class="avatar-img rounded" src="https://www.svgrepo.com/show/477047/horn.svg" alt="">
    </div>
    <div class="ms-sm-3 d-flex">
      <p class="small mb-2"><b>{{notice.category|title}}:</b> {{notice.notification}}</p>
      <p class="small ms-3">{{notice.created_at|comment_time_fixer}}</p>
    </div>
  </a>
</li>

{% else %}
<li>
  <div
    class="list-group-item list-group-item-action rounded
           {% if not notice.seen %}badge-unread{% endif %}
           d-flex border-0 mb-1 p-3"
    style="cursor:pointer;"
    onclick="window.location.href='{{ notice.link }}';">

    <div class="avatar text-center d-none d-sm-inline-block me-3">
      <img
        src="https://www.svgrepo.com/show/271589/social-media-like.svg"
        alt="Like"
        class="avatar-img rounded-circle"
        width="40" height="40"
      >
    </div>

    <div class="flex-grow-1">
      <div class="d-flex justify-content-between align-items-center">
        
        <p class="small mb-0">
          <b>
            {% if notice.content %}
              <a href="{{ notice.content.person_link }}"
                 onclick="event.stopPropagation();">
                {{ notice.content.person_name }}
              </a>
            {% else %}
              Someone
            {% endif %}
          </b>
          {{ notice.notification }}
        </p>

        <small class="text-muted">
          {{ notice.created_at|comment_time_fixer }}
        </small>
      </div>
    </div>
  </div>
</li>

{% endif %}


{% endfor %}